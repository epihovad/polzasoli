jQuery.fn.jStars=function(a){a=$.extend({path:"/inc/advanced/jStars/",star_on:"",star_off:"",size:{w:"24",wm:"17",h:"22",hm:"16"},w:0,h:0,count:5,active:!0,score:0,name:"",url:"",callback:function(){}},a);return this.each(function(){function h(b,c){c=b.index();var d=0;b.parent().find("img").each(function(){$(this).attr("src",d>c?a.star_off:a.star_on);d++})}var c=$(this);$.preloadImg(a.star_on,a.star_off);a.active=c.attr("active")?"1"==c.attr("active")?!0:!1:!1;a.score=c.attr("score")?c.attr("score"): 0;a.name=c.attr("name")?c.attr("name"):"";var b=c.hasClass("mini");a.w=b?a.size.wm:a.size.w;a.h=b?a.size.hm:a.size.h;a.star_on=a.path+"img/star-on"+(b?"-mini":"")+".png";a.star_off=a.path+"img/star-off"+(b?"-mini":"")+".png";for(var b=$('<div style="height:'+a.h+"px; width:"+a.w*a.count+"px; font-size:0; background-image:url("+a.star_off+"); cursor:"+(a.active?"pointer":"default")+';"></div>'),f=$('<div style="height:'+a.h+"px; width:"+Math.round(a.score*a.w)+"px; font-size:0; background-image:url("+ a.star_on+');"></div>'),d=$('<div style="position:relative; height:'+a.h+"px; width:"+a.w*a.count+"px; margin-top:-"+a.h+'px; font-size:0; visibility:hidden; font-size:0;"></div>'),e=0;e<a.count;e++)d.append('<img src="'+a.star_off+'" alt="" title="'+(e+1)+'" />');var g=$('<input type="hidden" value="'+a.score+'" name="'+a.name+'">');b.append(f).append(d);c.append(b);a.name&&b.after(g);a.active&&(d.find("img").mouseover(function(){h($(this))}),d.find("img").click(function(){var b=void 0,b=$(this).index()+ 1;f.width(b*a.w);a.name&&g.val(b);a.url&&inajax(a.url+"&score="+b)}),d.mouseout(function(){$(this).css("visibility","hidden")}),b.mouseover(function(){a.active&&d.css("visibility","visible")}))})};